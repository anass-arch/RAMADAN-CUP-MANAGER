<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S2G Africa ‚Äî Ramadan Cup 2026</title>
    <style>
        /* ============================================
           Ramadan 1447 Theme (White/Blue/Orange S2G)
           ============================================ */
        :root {
            --primary: #1a237e;
            /* Deep Blue */
            --primary-dark: #000051;
            /* Very Deep Blue */
            --accent: #E8781A;
            /* S2G Orange */
            --surface: rgba(255, 255, 255, 0.9);
            --text-main: #1a237e;
            --text-dim: #555;
            --card-radius: 12px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ffffff 0%, #e3f2fd 40%, #1a237e 100%);
            background-attachment: fixed;
            color: var(--text-main);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            position: relative;
        }

        /* Random Orange Lines Background Effect */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            opacity: 0.15;
            background-image:
                linear-gradient(45deg, transparent 48%, var(--accent) 49%, var(--accent) 51%, transparent 52%),
                linear-gradient(-25deg, transparent 45%, var(--accent) 46%, var(--accent) 47%, transparent 48%),
                linear-gradient(110deg, transparent 30%, var(--accent) 31%, var(--accent) 31.5%, transparent 32%),
                linear-gradient(-70deg, transparent 70%, var(--accent) 71%, var(--accent) 71.5%, transparent 72%);
            background-size: 400px 400px, 350px 350px, 500px 500px, 600px 600px;
        }

        /* === HEADER === */
        header {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            border-bottom: 3px solid var(--accent);
            padding: 1.5rem 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            position: relative;
            z-index: 10;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .header-logo {
            width: 80px;
            height: 80px;
            object-fit: contain;
            background: white;
            border-radius: 12px;
            padding: 6px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .header-badge {
            font-size: 2.5rem;
            color: var(--primary);
            text-shadow: 0 0 10px rgba(232, 120, 26, 0.2);
            position: absolute;
            right: 2rem;
        }

        header h1 {
            color: var(--primary);
            font-size: 2.5rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 1px 1px 0px rgba(232, 120, 26, 0.3);
            margin: 0;
            line-height: 1.1;
        }

        header p {
            color: var(--accent);
            font-weight: 600;
            font-size: 1rem;
            margin-top: 4px;
            letter-spacing: 1px;
        }

        /* === MAIN === */
        main {
            flex: 1;
            padding: 2rem;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        /* === TABS === */
        .nav-tabs {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 2rem;
            background: white;
            padding: 0.75rem;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .nav-tabs button {
            background: transparent;
            color: var(--text-dim);
            border: 2px solid transparent;
            padding: 10px 24px;
            border-radius: 30px;
            font-size: 0.95rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
        }

        .nav-tabs button:hover {
            color: var(--accent);
            background: rgba(232, 120, 26, 0.05);
            border-color: rgba(232, 120, 26, 0.2);
        }

        .nav-tabs button.active {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            box-shadow: 0 4px 12px rgba(26, 35, 126, 0.3);
            border-color: var(--primary);
            transform: scale(1.05);
        }

        .nav-tabs .btn-util {
            flex: 0;
            min-width: auto;
            color: #777;
            border: 1px solid #ddd;
            font-size: 0.85rem;
            padding: 10px 16px;
        }

        /* === SECTIONS === */
        section {
            background: var(--surface);
            border: 1px solid white;
            border-radius: var(--card-radius);
            padding: 2.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
            backdrop-filter: blur(12px);
            animation: fadeIn 0.5s ease-out;
            position: relative;
        }

        section::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--accent), var(--primary));
            border-radius: var(--card-radius) var(--card-radius) 0 0;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hidden {
            display: none !important;
        }

        h2 {
            color: var(--primary);
            font-size: 1.8rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid rgba(232, 120, 26, 0.3);
            padding-bottom: 1rem;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        h3 {
            color: var(--accent);
            margin-bottom: 1rem;
            font-size: 1.2rem;
            border-left: 4px solid var(--primary);
            padding-left: 10px;
            font-weight: 700;
        }

        /* === FORMS === */
        label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--primary);
            font-weight: 600;
        }

        input[type="text"],
        input[type="date"],
        input[type="number"],
        textarea {
            width: 100%;
            padding: 12px 15px;
            background: white;
            border: 1px solid #ccc;
            border-radius: 8px;
            color: #333;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s;
        }

        input:focus,
        textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(232, 120, 26, 0.15);
        }

        .players-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            /* Force 4 columns */
            gap: 2px;
            /* Small gap for table-like look */
            margin-top: 1rem;
            max-height: 500px;
            overflow-y: auto;
            border: 1px solid #ccc;
        }

        .player-card-btn {
            padding: 8px 4px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 50px;
            line-height: 1.2;
        }

        .player-card-btn strong {
            font-size: 0.75rem;
            margin-bottom: 2px;
            opacity: 0.8;
        }

        .player-card-btn:hover {
            filter: brightness(0.95);
            opacity: 0.9;
        }

        .player-card-btn.selected {
            outline: 2px solid var(--accent);
            z-index: 10;
            font-weight: bold;
            transform: scale(1.02);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .player-card-btn.taken {
            opacity: 0.4;
            pointer-events: none;
            text-decoration: line-through;
            filter: grayscale(1);
        }

        /* Translucent Colors requested */
        .player-cat-1 {
            background-color: rgba(178, 223, 219, 0.7);
            color: #004d40;
            border-color: #b2dfdb;
        }

        /* Green */
        .player-cat-2 {
            background-color: rgba(255, 249, 196, 0.7);
            color: #f57f17;
            border-color: #fff9c4;
        }

        /* Yellow */
        .player-cat-3 {
            background-color: rgba(179, 229, 252, 0.7);
            color: #0277bd;
            border-color: #b3e5fc;
        }

        /* Blue */

        .available-players-section h4 {
            text-align: center;
            color: var(--primary);
            margin-bottom: 10px;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 1rem;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        /* === BUTTONS === */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 12px 24px;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent), #ff9800);
            color: white;
            box-shadow: 0 4px 15px rgba(232, 120, 26, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(232, 120, 26, 0.4);
        }

        /* === DRAW UI === */
        .draw-container {
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }

        .live-input-area {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            border: 2px solid var(--primary);
            box-shadow: 0 10px 40px rgba(26, 35, 126, 0.1);
            margin-bottom: 2rem;
        }

        #current-player-input {
            font-size: 2rem;
            text-align: center;
            border-bottom: 4px solid var(--accent);
            color: var(--primary);
            font-weight: bold;
            margin-bottom: 1.5rem;
        }

        .team-selector {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-team-select {
            background: #f5f5f5;
            color: var(--primary);
            padding: 1rem 1.5rem;
            border-radius: 12px;
            border: 1px solid #ddd;
            font-size: 1.1rem;
            cursor: pointer;
            flex: 1;
            min-width: 140px;
            font-weight: 600;
        }

        .btn-team-select:hover:not(:disabled) {
            background: var(--primary);
            color: white;
            transform: translateY(-3px);
        }

        .btn-team-select:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* === TEAMS === */
        .teams-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .team-card {
            background: white;
            border: 1px solid rgba(0, 0, 0, 0.08);
            border-radius: 12px;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
        }

        .team-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--primary);
        }

        .team-card.fixed-team {
            background: #fff8e1;
            border-color: rgba(232, 120, 26, 0.2);
        }

        .team-card.fixed-team::before {
            background: var(--accent);
        }

        /* === MATCHES COMPACT ROW === */
        .matches-grid-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            max-width: 100%;
            overflow-x: auto;
        }

        .match-day-row {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            background: white;
            padding: 0.8rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: transform 0.2s;
        }

        .match-day-row:hover {
            transform: translateX(5px);
            border-color: var(--accent);
        }

        .team-header {
            background: transparent;
            /* Removed blue background */
            color: var(--primary);
            /* Text color */
            padding: 12px;
            font-weight: bold;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 8px;
            /* Space between title and count */
            border-bottom: 2px solid var(--accent);
        }

        .team-title {
            font-size: 1.2rem;
            text-transform: uppercase;
            text-align: center;
            line-height: 1.2;
        }

        .team-count {
            font-size: 0.9rem;
            background: #eee;
            color: #555;
            padding: 2px 10px;
            border-radius: 12px;
            font-weight: normal;
        }

        .day-date-block {
            min-width: 140px;
            text-align: right;
            padding-right: 1.5rem;
            border-right: 3px solid var(--accent);
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .day-label {
            font-size: 0.9rem;
            text-transform: uppercase;
            color: var(--text-dim);
            letter-spacing: 1px;
            font-weight: bold;
        }

        .date-val {
            font-size: 1.1rem;
            font-weight: 800;
            color: var(--primary);
        }

        .matches-in-row {
            display: flex;
            gap: 1rem;
            flex: 1;
            justify-content: space-between;
            /* Distribute evenly */
        }

        .match-card-compact {
            background: #f9f9f9;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 0.5rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            flex: 1;
            min-width: 280px;
            justify-content: space-between;
        }

        .team-compact {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--primary);
            flex: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .score-compact input {
            width: 40px;
            padding: 4px;
            font-size: 1rem;
            text-align: center;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-weight: bold;
        }

        .vs-compact {
            font-size: 0.75rem;
            color: #aaa;
            font-weight: bold;
        }

        .team-title {
            color: var(--primary);
            font-size: 1.2rem;
            font-weight: bold;
        }

        .player-list li {
            padding: 6px 10px;
            margin-bottom: 4px;
            background: #f9f9f9;
            border-radius: 6px;
            display: flex;
            gap: 8px;
            color: #333;
        }

        .player-number {
            color: var(--accent);
            font-weight: bold;
            width: 20px;
        }

        /* === MATCHES === */
        .match-card {
            background: white;
            border: 1px solid #ddd;
            border-left: 4px solid var(--accent);
            border-radius: 8px;
            padding: 1.25rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .team-name-match {
            flex: 1;
            font-weight: bold;
            font-size: 1.1rem;
            color: var(--primary);
            text-align: center;
        }

        .score-input-group {
            display: flex;
            align-items: center;
            gap: 12px;
            background: #f5f5f5;
            border-radius: 50px;
            padding: 8px 16px;
        }

        .score-input-group input {
            width: 50px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            border: 1px solid #ccc;
            background: white;
        }

        /* Final Score Inputs Larger */
        .final-score-input {
            width: 80px !important;
            height: 50px !important;
            font-size: 1.5rem !important;
            text-align: center;
            border: 2px solid var(--primary);
            border-radius: 8px;
            font-weight: bold;
            color: var(--primary);
            background: #fff;
        }

        /* === BRACKET LAYOUT (CARR√â FINAL) === */
        .arabic-title {
            font-family: 'Segoe UI', sans-serif;
            font-size: 2.5rem;
            color: var(--accent);
            text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }

        .final-bracket {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
            margin-top: 2rem;
            background: linear-gradient(180deg, rgba(26, 35, 126, 0.03) 0%, rgba(232, 120, 26, 0.05) 100%);
            padding: 2rem;
            border-radius: 20px;
            border: 1px dashed rgba(0, 0, 0, 0.1);
        }

        .semis-row {
            display: flex;
            gap: 4rem;
            width: 100%;
            justify-content: center;
            flex-wrap: wrap;
            position: relative;
        }

        .semis-match-container {
            flex: 1;
            min-width: 300px;
            max-width: 450px;
        }

        .final-row {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            margin-top: 1rem;
            width: 100%;
        }

        .final-match-container {
            width: 100%;
            max-width: 500px;
            transform: scale(1.1);
            border: 2px solid var(--accent);
            border-radius: 12px;
            padding: 10px;
            background: rgba(232, 120, 26, 0.05);
        }

        .winner-cup {
            width: 150px;
            height: auto;
            margin-bottom: 1rem;
            animation: bounce 2s infinite;
            filter: drop-shadow(0 10px 15px rgba(0, 0, 0, 0.3));
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        /* === STANDINGS === */
        .standings-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 8px;
        }

        .standings-table th {
            background: var(--primary);
            color: white;
            padding: 14px;
            text-align: center;
            font-weight: bold;
            text-transform: uppercase;
        }

        .standings-table td {
            background: white;
            padding: 14px;
            text-align: center;
            border-top: 1px solid #eee;
            border-bottom: 1px solid #eee;
            transition: all 0.2s;
        }

        /* Top 4 Qualification Zone */
        .standings-table tbody tr:nth-child(-n+4) td {
            background: linear-gradient(90deg, rgba(0, 230, 118, 0.05) 0%, white 30%);
            border-top: 1px solid rgba(0, 230, 118, 0.2);
            border-bottom: 1px solid rgba(0, 230, 118, 0.2);
        }

        .standings-table tbody tr:nth-child(-n+4) td:first-child {
            border-left: 4px solid #00e676;
            /* Green accent for qualification */
            color: var(--primary);
            font-weight: bold;
            position: relative;
        }

        /* Add "Q" badge for qualified */
        .standings-table tbody tr:nth-child(-n+4) td:nth-child(2)::after {
            content: 'QUALIFI√â';
            display: inline-block;
            margin-left: 8px;
            font-size: 0.6rem;
            background: #00e676;
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            vertical-align: middle;
            font-weight: bold;
            letter-spacing: 0.5px;
        }

        /* 1st Place Special Gold */
        .standings-table tbody tr:first-child td {
            background: linear-gradient(90deg, rgba(255, 215, 0, 0.15) 0%, white 40%);
        }

        .standings-table tbody tr:first-child td:first-child {
            border-left-color: #ffd700;
            color: #d4af37;
            font-size: 1.2rem;
        }

        /* === PRINT === */
        @media print {
            body {
                background: white !important;
                color: black !important;
            }

            body::before {
                display: none;
            }

            header,
            .nav-tabs,
            .no-print,
            .live-input-area {
                display: none !important;
            }

            section {
                background: white !important;
                border: 1px solid #ccc !important;
                box-shadow: none !important;
            }

            .semis-row,
            .final-row {
                display: block !important;
            }

            .winner-cup {
                display: none;
            }
        }
    </style>
</head>

<body>

    <header>
        <img src="logo-s2g.png" alt="S2G Africa" class="header-logo">
        <div style="text-align: center;">
            <h1>Ramadan Cup 2026</h1>
            <p>S2G Africa ‚Äî Tournoi de Football</p>
        </div>
        <div class="header-badge">‚ò™</div>
    </header>

    <main>
        <div class="nav-tabs no-print">
            <button class="active" onclick="showSection('setup', this)">‚öôÔ∏è Config</button>
            <button onclick="showSection('draw', this)">üé≤ Tirage Live</button>
            <button onclick="showSection('schedule', this)">üìÖ Calendrier</button>
            <button onclick="showSection('results', this)">‚öΩ R√©sultats</button>
            <button onclick="showSection('standings', this)">üìä Classement</button>
            <button onclick="showSection('finals', this)">üèÜ ÿßŸÑŸÖÿ±ÿ®ÿπ ÿßŸÑÿ∞Ÿáÿ®Ÿä</button>
            <button class="btn-util" onclick="exportData()">üñ®Ô∏è PDF</button>
            <button class="btn-util" onclick="resetAll()">üóë Reset</button>
        </div>

        <!-- CONFIG -->
        <section id="setup">
            <h2>üõ†Ô∏è Configuration du Tournoi</h2>
            <div class="form-grid">
                <div>
                    <h3>√âquipes √† Tirer (Draft)</h3>
                    <div style="margin-bottom:1rem;color:#777;font-size:0.9rem;">Ces 4 √©quipes seront compl√©t√©es lors du
                        tirage manuel (8 joueurs max).</div>
                    <div class="config-grid">
                        <div>
                            <label>Nom √âquipe A</label>
                            <input type="text" id="team-name-0" placeholder="√âquipe A">
                        </div>
                        <div>
                            <label>Nom √âquipe B</label>
                            <input type="text" id="team-name-1" placeholder="√âquipe B">
                        </div>
                        <div>
                            <label>Nom √âquipe C</label>
                            <input type="text" id="team-name-2" placeholder="√âquipe C">
                        </div>
                        <div>
                            <label>Nom √âquipe D</label>
                            <input type="text" id="team-name-3" placeholder="√âquipe D">
                        </div>
                    </div>

                    <h3 style="margin-top:2rem;color:var(--primary);">Joueurs & Cat√©gories</h3>
                    <div class="config-grid" style="grid-template-columns: repeat(3, 1fr);">
                        <div>
                            <label style="color:#004d40;">Cat√©gorie 1 (Vert)</label>
                            <textarea id="cat1-players" rows="10" placeholder="Un joueur par ligne..."></textarea>
                        </div>
                        <div>
                            <label style="color:#f57f17;">Cat√©gorie 2 (Jaune)</label>
                            <textarea id="cat2-players" rows="10" placeholder="Un joueur par ligne..."></textarea>
                        </div>
                        <div>
                            <label style="color:#0277bd;">Cat√©gorie 3 (Bleu)</label>
                            <textarea id="cat3-players" rows="10" placeholder="Un joueur par ligne..."></textarea>
                        </div>
                    </div>

                    <h3 style="margin-top:2rem;color:var(--primary);">√âquipes Fixes (Hors Tirage)</h3>
                    <div
                        style="background:#f5f5f5; padding:1rem; border-radius:8px; margin-bottom:1rem; border:1px solid #e0e0e0;">
                        <label>Invit√© 1 - Nom</label><input type="text" id="fixed-name-1"
                            placeholder="Ex: S2G Test Indus">
                        <label style="margin-top:5px">Joueurs</label><textarea id="fixed-players-1"
                            placeholder="Liste des joueurs Invit√© 1..."></textarea>
                    </div>
                    <div style="background:#f5f5f5; padding:1rem; border-radius:8px; border:1px solid #e0e0e0;">
                        <label>Invit√© 2 - Nom</label><input type="text" id="fixed-name-2" placeholder="Ex: Invit√© 2">
                        <label style="margin-top:5px">Joueurs</label><textarea id="fixed-players-2"
                            placeholder="Liste des joueurs Invit√© 2..."></textarea>
                    </div>
                </div>
                <div>
                    <h3>Calendrier</h3>
                    <label>Journ√©e 1</label><input type="date" id="date-j1">
                    <label style="margin-top:10px">Journ√©e 2</label><input type="date" id="date-j2">
                    <label style="margin-top:10px">Journ√©e 3</label><input type="date" id="date-j3">
                    <label style="margin-top:10px">Journ√©e 4</label><input type="date" id="date-j4">
                    <label style="margin-top:10px">Journ√©e 5</label><input type="date" id="date-j5">
                    <hr style="border:0; border-top:1px solid #e0e0e0; margin:1rem 0;">
                    <label>Demi-finales</label><input type="date" id="date-files-demi">
                    <label style="margin-top:10px">Finale</label><input type="date" id="date-files-finale">
                    <button class="btn btn-primary" onclick="saveConfig()" style="width:100%; margin-top:2rem;">‚úÖ
                        Valider la Configuration</button>
                </div>
            </div>
        </section>

        <!-- DRAW -->
        <section id="draw" class="hidden">
            <h2>Tirage au sort pour composition des √©quipes</h2>
            <div class="draw-container no-print">
                <div class="draw-control-panel">
                    <h3 style="color:var(--primary); margin-bottom:1rem;">TIRAGE EN DIRECT</h3>

                    <!-- Selected Player Display -->
                    <div id="selected-player-display" class="selected-player-box">
                        S√©lectionnez un joueur dans la liste...
                    </div>

                    <!-- Team Selection Buttons -->
                    <div class="draft-buttons" id="draft-buttons">
                        <!-- JS Injected -->
                    </div>

                    <!-- Available Players Grid -->
                    <div class="available-players-section">
                        <h4>Joueurs Disponibles</h4>
                        <div id="available-players-grid" class="players-grid">
                            <!-- JS Injected Players -->
                        </div>
                    </div>
                </div>
                <h3>Composition des √âquipes</h3>
                <div class="teams-grid" id="teams-display-draw"></div>
        </section>

        <!-- MATCHES SCHEDULE (CALENDRIER) -->
        <section id="schedule" class="hidden">
            <h2>üìÖ Calendrier des Matchs</h2>

            <div style="text-align:center; margin-bottom:2rem;" class="no-print">
                <button class="btn btn-primary" onclick="generateSchedule(true)">üîÑ G√©n√©rer le Calendrier
                    (Al√©atoire)</button>
            </div>

            <div id="schedule-container" class="matches-grid-container">
                <!-- Matches Injected JS (Schedule Mode) -->
            </div>
        </section>

        <!-- MATCHES RESULTS (R√âSULTATS) -->
        <section id="results" class="hidden">
            <h2>‚öΩ R√©sultats des Matchs</h2>

            <div id="results-container" class="matches-grid-container">
                <!-- Matches Injected JS (Results Mode) -->
            </div>
        </section>

        <!-- STANDINGS -->
        <section id="standings" class="hidden">
            <h2>üìä Classement G√©n√©ral</h2>
            <div style="overflow-x:auto;">
                <table class="standings-table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>√âquipe</th>
                            <th>Pts</th>
                            <th>MJ</th>
                            <th>G</th>
                            <th>N</th>
                            <th>P</th>
                            <th>BP</th>
                            <th>BC</th>
                            <th>Diff</th>
                        </tr>
                    </thead>
                    <tbody id="standings-body"></tbody>
                </table>
            </div>
        </section>

        <!-- FINALS (CARR√â FINAL) -->
        <section id="finals" class="hidden">
            <h2 class="arabic-title">üèÜ ÿßŸÑŸÖÿ±ÿ®ÿπ ÿßŸÑÿ∞Ÿáÿ®Ÿä</h2>
            <div style="text-align:center; margin-bottom:1rem;" class="no-print">
                <button class="btn btn-primary" id="btn-draw-semis" onclick="drawSemiFinals()">üé≤ Tirage au Sort Demis
                    (Top 4)</button>
            </div>
            <div class="final-bracket">
                <h3 style="border:none; padding:0; font-size:1.5rem; text-align:center;">Demi-Finales</h3>
                <div class="semis-row">
                    <div class="semis-match-container" id="semi-1-container"></div>
                    <div class="semis-match-container" id="semi-2-container"></div>
                </div>
                <div style="margin: 2rem 0; color: #ccc; font-size: 2rem;">‚¨áÔ∏è</div>
                <h3 style="border:none; padding:0; font-size:1.5rem; text-align:center;">Finale</h3>
                <div class="final-row">
                    <img src="Coupe Ramadan.png" class="winner-cup" alt="Coupe Ramadan">
                    <div class="final-match-container" id="final-container"></div>
                </div>
                <!-- 3rd Place Removed per request -->
            </div>
        </section>

    </main>

    <script>
        const STORAGE_KEY = 'ramadanCupV4';
        const DRAFT_TEAM_LIMIT = 8;
        const DEFAULT_DATES = ['2026-02-19', '2026-02-23', '2026-02-26', '2026-03-02', '2026-03-05'];

        const DEFAULT_CONFIG_PLAYERS = { cat1: [], cat2: [], cat3: [] };

        let appState = {
            config: { players: { ...DEFAULT_CONFIG_PLAYERS } },
            teams: [
                { id: 0, name: '√âquipe A', players: [], type: 'draft' },
                { id: 1, name: '√âquipe B', players: [], type: 'draft' },
                { id: 2, name: '√âquipe C', players: [], type: 'draft' },
                { id: 3, name: '√âquipe D', players: [], type: 'draft' },
                { id: 4, name: 'S2G Test Indus', players: [], type: 'fixed' },
                { id: 5, name: 'Invit√© 2', players: [], type: 'fixed' }
            ],
            dates: { rounds: [...DEFAULT_DATES], semis: '2026-03-09', final: '2026-03-13' },
            matches: [],
            finals: { semi1: null, semi2: null, final: null }
        };

        const SECTIONS = ['setup', 'draw', 'schedule', 'results', 'standings', 'finals'];

        window.onload = () => { loadData(); renderAll(); };

        function loadData() {
            const data = localStorage.getItem(STORAGE_KEY);
            if (data) {
                const parsed = JSON.parse(data);
                appState = { ...appState, ...parsed };
                // Ensure config exists for old data
                if (!appState.config) appState.config = { players: { ...DEFAULT_CONFIG_PLAYERS } };
                if (!appState.config.players) appState.config.players = { ...DEFAULT_CONFIG_PLAYERS };
            }
        }

        function renderAll() {
            renderConfigInputs();
            renderDraftButtons();
            renderMultimediaTeams();
            renderAvailablePlayers(); // New grid render
            renderScheduleView();
            renderResultsView();
            updateStandings();
            renderFinals();
        }

        function showSection(id, btn) {
            SECTIONS.forEach(s => document.getElementById(s).classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            document.querySelectorAll('.nav-tabs button').forEach(b => b.classList.remove('active'));
            if (btn) btn.classList.add('active');
        }

        function renderConfigInputs() {
            for (let i = 0; i < 4; i++) document.getElementById(`team-name-${i}`).value = appState.teams[i].name;
            document.getElementById('fixed-name-1').value = appState.teams[4].name;
            document.getElementById('fixed-name-2').value = appState.teams[5].name;
            document.getElementById('fixed-players-1').value = appState.teams[4].players.join('\n');
            document.getElementById('fixed-players-2').value = appState.teams[5].players.join('\n');

            // Render Player Categories
            if (appState.config && appState.config.players) {
                document.getElementById('cat1-players').value = appState.config.players.cat1.join('\n');
                document.getElementById('cat2-players').value = appState.config.players.cat2.join('\n');
                document.getElementById('cat3-players').value = appState.config.players.cat3.join('\n');
            }

            for (let i = 0; i < 5; i++) document.getElementById(`date-j${i + 1}`).value = appState.dates.rounds[i];
            document.getElementById('date-files-demi').value = appState.dates.semis;
            document.getElementById('date-files-finale').value = appState.dates.final;
        }

        function saveConfig() {
            // Safety Init
            if (!appState.config) appState.config = { players: { cat1: [], cat2: [], cat3: [] } };
            if (!appState.config.players) appState.config.players = { cat1: [], cat2: [], cat3: [] };

            for (let i = 0; i < 4; i++) appState.teams[i].name = document.getElementById(`team-name-${i}`).value || `√âquipe ${String.fromCharCode(65 + i)}`;
            appState.teams[4].name = document.getElementById('fixed-name-1').value || 'Invit√© 1';
            appState.teams[5].name = document.getElementById('fixed-name-2').value || 'Invit√© 2';
            appState.teams[4].players = document.getElementById('fixed-players-1').value.split('\n').map(s => s.trim()).filter(s => s);
            appState.teams[5].players = document.getElementById('fixed-players-2').value.split('\n').map(s => s.trim()).filter(s => s);

            // Save Player Categories
            appState.config.players.cat1 = document.getElementById('cat1-players').value.split('\n').map(s => s.trim()).filter(s => s);
            appState.config.players.cat2 = document.getElementById('cat2-players').value.split('\n').map(s => s.trim()).filter(s => s);
            appState.config.players.cat3 = document.getElementById('cat3-players').value.split('\n').map(s => s.trim()).filter(s => s);

            for (let i = 0; i < 5; i++) appState.dates.rounds[i] = document.getElementById(`date-j${i + 1}`).value;
            appState.dates.semis = document.getElementById('date-files-demi').value;
            appState.dates.final = document.getElementById('date-files-finale').value;
            saveData(); renderAll(); alert("‚úÖ Configuration sauvegard√©e avec succ√®s !");
            showSection('draw', document.querySelectorAll('.nav-tabs button')[1]);
        }

        function renderDraftButtons() {
            const container = document.getElementById('draft-buttons');
            container.innerHTML = '';
            for (let i = 0; i < 4; i++) {
                const t = appState.teams[i];
                const btn = document.createElement('button');
                btn.className = 'btn-team-select';
                // Strict separation: Name (Top) / Count (Bottom)
                btn.innerHTML = `<span style="font-size:1.1rem; display:block; margin-bottom:4px;">${t.name}</span>
                         <span style="font-size:0.9rem; font-weight:normal;">${t.players.length}/${DRAFT_TEAM_LIMIT} Joueurs</span>`;
                btn.onclick = () => addToTeam(i);
                if (t.players.length >= DRAFT_TEAM_LIMIT) btn.disabled = true;
                container.appendChild(btn);
            }
        }

        let selectedPlayerName = null;

        function renderAvailablePlayers() {
            const container = document.getElementById('available-players-grid');
            container.innerHTML = '';

            // Check if any players exist
            const totalPlayers = (appState.config.players.cat1.length || 0) + (appState.config.players.cat2.length || 0) + (appState.config.players.cat3.length || 0);
            if (totalPlayers === 0) {
                container.innerHTML = '<div style="grid-column: 1/-1; text-align:center; padding:2rem; color:#777;">Aucun joueur configur√©.<br>Allez dans l\'onglet <strong>CONFIGURATION</strong> pour ajouter les listes de joueurs (Cat 1, 2, 3).</div>';
                return;
            }

            // Get all assigned players
            const assigned = new Set();
            appState.teams.forEach(t => t.players.forEach(p => assigned.add(p)));

            const cats = [
                { id: 'cat1', players: appState.config.players.cat1, cls: 'player-cat-1', label: 'CAT 1' },
                { id: 'cat2', players: appState.config.players.cat2, cls: 'player-cat-2', label: 'CAT 2' },
                { id: 'cat3', players: appState.config.players.cat3, cls: 'player-cat-3', label: 'CAT 3' }
            ];

            cats.forEach(cat => {
                cat.players.forEach(p => {
                    if (!p) return;
                    const isTaken = assigned.has(p);
                    const isSelected = selectedPlayerName === p;

                    const btn = document.createElement('div');
                    btn.className = `player-card-btn ${cat.cls} ${isTaken ? 'taken' : ''} ${isSelected ? 'selected' : ''}`;
                    // Changed content order: Name first, Cat small
                    btn.innerHTML = `<strong>${cat.label}</strong><div>${p}</div>`;

                    if (!isTaken) {
                        btn.onclick = () => selectPlayer(p);
                    }

                    container.appendChild(btn);
                });
            });
        }

        function selectPlayer(name) {
            selectedPlayerName = name;
            document.getElementById('selected-player-display').innerHTML = name;
            renderAvailablePlayers(); // Re-render to highlight selection
        }

        function addToTeam(idx) {
            if (!selectedPlayerName) {
                alert("Veuillez s√©lectionner un joueur dans la liste !");
                return;
            }

            if (appState.teams[idx].players.length >= DRAFT_TEAM_LIMIT) {
                alert("Cette √©quipe est compl√®te !");
                return;
            }

            appState.teams[idx].players.push(selectedPlayerName);

            // Reset selection
            selectedPlayerName = null;
            document.getElementById('selected-player-display').innerHTML = 'S√©lectionnez un joueur...';

            saveData();
            renderDraftButtons();
            renderMultimediaTeams();
            renderAvailablePlayers(); // Update grid (mark taken)
        }

        function renderMultimediaTeams() {
            const container = document.getElementById('teams-display-draw');
            container.innerHTML = '';
            appState.teams.forEach(t => {
                const isFix = t.type === 'fixed';
                let html = `<div class="team-card ${isFix ? 'fixed-team' : ''}"><div class="team-header"><span class="team-title">${t.name}</span><span class="team-count">${t.players.length}${!isFix ? '/' + DRAFT_TEAM_LIMIT : ''}</span></div><ul class="player-list">`;
                t.players.forEach((p, i) => html += `<li><span class="player-number">${i + 1}</span> ${p}</li>`);
                container.innerHTML += html + '</ul></div>';
            });
        }

        function generateSchedule(rand) {
            if (appState.matches.length > 0 && rand && !confirm("√âcraser les matchs ?")) return;
            let t = [0, 1, 2, 3, 4, 5], rounds = [];
            for (let r = 0; r < 5; r++) {
                rounds.push([{ t1: t[0], t2: t[5] }, { t1: t[1], t2: t[4] }, { t1: t[2], t2: t[3] }]);
                t.splice(1, 0, t.pop());
            }
            if (rand) {
                for (let i = rounds.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1));[rounds[i], rounds[j]] = [rounds[j], rounds[i]]; }
                rounds.forEach(r => {
                    for (let i = r.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1));[r[i], r[j]] = [r[j], r[i]]; }
                    r.forEach(m => { if (Math.random() > 0.5) [m.t1, m.t2] = [m.t2, m.t1]; });
                });
            }
            appState.matches = [];
            rounds.forEach((r, idx) => r.forEach(m => appState.matches.push({ id: Date.now() + Math.random(), round: idx + 1, t1: m.t1, t2: m.t2, s1: null, s2: null })));
            saveData();
            renderScheduleView();
            renderResultsView();
            updateStandings();
        }

        function renderScheduleView() {
            const c = document.getElementById('schedule-container');
            c.innerHTML = '';

            if (!appState.matches.length) {
                c.innerHTML = '<div style="text-align:center;padding:2rem;">Aucun match g√©n√©r√©.</div>';
                return;
            }

            for (let r = 1; r <= 5; r++) {
                c.innerHTML += renderRoundRow(r, 'schedule');
            }
        }

        function renderResultsView() {
            const c = document.getElementById('results-container');
            c.innerHTML = '';

            if (!appState.matches.length) {
                c.innerHTML = '<div style="text-align:center;padding:2rem;">Aucun match g√©n√©r√©.</div>';
                return;
            }

            for (let r = 1; r <= 5; r++) {
                c.innerHTML += renderRoundRow(r, 'results');
            }
        }

        function renderRoundRow(round, mode) {
            let dateVal = appState.dates.rounds[round - 1];
            let dayDisplay = `JOURN√âE ${round}`;
            let dateDisplay = '-';

            if (dateVal) {
                try {
                    const d = new Date(dateVal);
                    dayDisplay = d.toLocaleDateString('fr-FR', { weekday: 'short' }).toUpperCase();
                    dateDisplay = d.toLocaleDateString('fr-FR', { day: 'numeric', month: 'short' });
                } catch (e) { }
            }

            let html = `
    <div class="match-day-row">
        <div class="day-date-block">
            <div class="day-label">J${round} ‚Ä¢ ${dayDisplay}</div>
            <div class="date-val">${dateDisplay}</div>
        </div>
        <div class="matches-in-row">
    `;

            appState.matches.filter(m => m.round === round).forEach(m => {
                const t1Name = appState.teams[m.t1].name;
                const t2Name = appState.teams[m.t2].name;

                html += `
        <div class="match-card-compact">
            <div class="team-compact" style="text-align:right" title="${t1Name}">${t1Name}</div>

            <div class="score-compact" style="display:flex;align-items:center;gap:4px;justify-content:center;min-width:80px;">
                ${mode === 'results' ?
                        `<input type="number" min="0" value="${m.s1 !== null ? m.s1 : ''}" onchange="upS('${m.id}',1,this.value)">` :
                        `<span style="font-weight:bold;color:#ccc;"></span>`
                    }

                <span class="vs-compact" style="font-size: ${mode === 'schedule' ? '1.2rem' : '0.75rem'}; color:${mode === 'schedule' ? 'var(--accent)' : '#aaa'}">
                    ${mode === 'schedule' ? 'VS' : ':'}
                </span>

                ${mode === 'results' ?
                        `<input type="number" min="0" value="${m.s2 !== null ? m.s2 : ''}" onchange="upS('${m.id}',2,this.value)">` :
                        `<span style="font-weight:bold;color:#ccc;"></span>`
                    }
            </div>

            <div class="team-compact" style="text-align:left" title="${t2Name}">${t2Name}</div>
        </div>`;
            });

            html += `</div></div>`;
            return html;
        }


        function upS(id, s, v) {
            const m = appState.matches.find(x => x.id == id);
            if (m) { m['s' + s] = v === '' ? null : parseInt(v); saveData(); updateStandings(); }
        }

        function updateStandings() {
            let stats = appState.teams.map((t, i) => ({ id: i, name: t.name, pts: 0, mj: 0, g: 0, n: 0, p: 0, bp: 0, bc: 0, diff: 0 }));
            appState.matches.forEach(m => {
                if (m.s1 !== null && m.s2 !== null) {
                    stats[m.t1].mj++; stats[m.t1].bp += m.s1; stats[m.t1].bc += m.s2; stats[m.t1].diff += (m.s1 - m.s2);
                    stats[m.t2].mj++; stats[m.t2].bp += m.s2; stats[m.t2].bc += m.s1; stats[m.t2].diff += (m.s2 - m.s1);
                    if (m.s1 > m.s2) { stats[m.t1].pts += 3; stats[m.t1].g++; stats[m.t2].p++; }
                    else if (m.s1 < m.s2) { stats[m.t2].pts += 3; stats[m.t2].g++; stats[m.t1].p++; }
                    else { stats[m.t1].pts++; stats[m.t1].n++; stats[m.t2].pts++; stats[m.t2].n++; }
                }
            });
            stats.sort((a, b) => b.pts - a.pts || b.diff - a.diff || b.bp - a.bp);
            const tb = document.getElementById('standings-body'); tb.innerHTML = '';
            stats.forEach((s, i) => {
                tb.innerHTML += `<tr><td>${i + 1}</td><td style="text-align:left;font-weight:bold;">${s.name}</td><td><strong>${s.pts}</strong></td><td>${s.mj}</td><td>${s.g}</td><td>${s.n}</td><td>${s.p}</td><td>${s.bp}</td><td>${s.bc}</td><td>${s.diff > 0 ? '+' + s.diff : s.diff}</td></tr>`;
            });
        }

        function drawSemiFinals() {
            // Top 4 logic repeated for brevity
            let stats = appState.teams.map((t, i) => ({ id: i, pts: 0, diff: 0, bp: 0 }));
            appState.matches.forEach(m => {
                if (m.s1 !== null && m.s2 !== null) {
                    stats[m.t1].pts += (m.s1 > m.s2 ? 3 : m.s1 == m.s2 ? 1 : 0); stats[m.t2].pts += (m.s2 > m.s1 ? 3 : m.s2 == m.s1 ? 1 : 0);
                    stats[m.t1].diff += m.s1 - m.s2; stats[m.t2].diff += m.s2 - m.s1; stats[m.t1].bp += m.s1; stats[m.t2].bp += m.s2;
                }
            });
            stats.sort((a, b) => b.pts - a.pts || b.diff - a.diff || b.bp - a.bp);
            const q = stats.slice(0, 4).map(s => s.id);
            if (q.length < 4) { alert("Pas assez d'√©quipes par√©es !"); return; }
            if (appState.finals.semi1 && !confirm("√âcraser le tirage ?")) return;

            // Shuffle
            for (let i = q.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1));[q[i], q[j]] = [q[j], q[i]]; }
            appState.finals.semi1 = { t1: q[0], t2: q[1], s1: null, s2: null };
            appState.finals.semi2 = { t1: q[2], t2: q[3], s1: null, s2: null };
            appState.finals.final = { t1: null, t2: null, s1: null, s2: null };
            saveData(); renderFinals();
        }

        function renderFinals() {
            // Semi 1
            const s1c = document.getElementById('semi-1-container'); s1c.innerHTML = '';
            if (appState.finals.semi1) s1c.innerHTML = htmlMatch('semi', 1, appState.finals.semi1);
            else s1c.innerHTML = '<div style="text-align:center;opacity:0.5;">En attente...</div>';

            // Semi 2
            const s2c = document.getElementById('semi-2-container'); s2c.innerHTML = '';
            if (appState.finals.semi2) s2c.innerHTML = htmlMatch('semi', 2, appState.finals.semi2);
            else s2c.innerHTML = '<div style="text-align:center;opacity:0.5;">En attente...</div>';

            // Final
            const fc = document.getElementById('final-container'); fc.innerHTML = '';
            if (appState.finals.final && appState.finals.final.t1 !== null) fc.innerHTML = htmlMatch('final', 0, appState.finals.final);
            else fc.innerHTML = '<div style="text-align:center;opacity:0.5;padding:1rem;">Finale en attente...</div>';
        }

        function htmlMatch(type, idx, m) {
            const n1 = m.t1 !== null ? appState.teams[m.t1].name : '?';
            const n2 = m.t2 !== null ? appState.teams[m.t2].name : '?';
            // Use 'final-score-input' class for larger inputs
            return `<div class="match-card" style="border-left-color:${type === 'final' ? '#E8781A' : 'var(--primary)'}"><div class="team-name-match" style="text-align:right;">${n1}</div><div class="score-input-group"><input type="number" min="0" class="final-score-input" value="${m.s1 !== null ? m.s1 : ''}" onchange="upF('${type}',${idx},1,this.value)"><span class="vs-badge">VS</span><input type="number" min="0" class="final-score-input" value="${m.s2 !== null ? m.s2 : ''}" onchange="upF('${type}',${idx},2,this.value)"></div><div class="team-name-match" style="text-align:left;">${n2}</div></div>`;
        }

        function upF(type, idx, side, val) {
            let m;
            if (type === 'semi') m = idx === 1 ? appState.finals.semi1 : appState.finals.semi2;
            else if (type === 'final') m = appState.finals.final;

            if (m) {
                m['s' + side] = val === '' ? null : parseInt(val);
                saveData();
                if (type === 'semi') checkPromote();
                renderFinals(); // Force update UI
            }
        }

        function checkPromote() {
            const s1 = appState.finals.semi1, s2 = appState.finals.semi2;
            if (s1 && s1.s1 !== null && s1.s2 !== null && s1.s1 !== s1.s2 && s2 && s2.s1 !== null && s2.s2 !== null && s2.s1 !== s2.s2) {
                const w1 = s1.s1 > s1.s2 ? s1.t1 : s1.t2;
                const w2 = s2.s1 > s2.s2 ? s2.t1 : s2.t2;
                appState.finals.final = { t1: w1, t2: w2, s1: null, s2: null };
                saveData(); renderFinals();
            }
        }

        function saveData() { localStorage.setItem(STORAGE_KEY, JSON.stringify(appState)); }
        function loadData() { const d = localStorage.getItem(STORAGE_KEY); if (d) appState = JSON.parse(d); }
        function resetAll() { if (confirm("Tout effacer ?")) { localStorage.removeItem(STORAGE_KEY); location.reload(); } }
        function exportData() {
            document.querySelectorAll('.hidden').forEach(e => e.classList.remove('hidden'));
            window.print();
            document.querySelectorAll('.nav-tabs button').forEach(b => b.classList.remove('active'));
            showSection('setup', document.querySelector('.nav-tabs button'));
        }
    </script>
</body>

</html>